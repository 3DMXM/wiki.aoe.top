# 变形网格指南

## 目的
当穿着多层服装（特别是外套）时，可能出现网格重叠问题。为此需要准备**变形骨骼网格**（体积缩减版网格）来解决此类问题。

---

## 为什么需要变形网格
inZOI支持同时穿着多层服装组合  
例如：上衣+外套+下装  

但标准版上衣具有体积感（手臂/胸部/侧面），与外套组合时可能出现：
- 网格穿透或重叠
- 仅靠遮罩无法完全解决
- 导致不自然或视觉破损的穿搭效果

→ 为可能重叠的服装创建**体积缩减版网格**  
并配置**自动切换**机制（当搭配外套时使用）

---

## 何时需要制作变形网格
| 服装类型 | 是否必需 | 说明 |
|----------|----------|------|
| 宽松上衣（连帽衫/卫衣） | 是 | 胸部/手臂区域极易重叠 |
| 连体衣/连衣裙 | 是 | 覆盖多身体区域 |
| 阔腿裤 | 是 | 大腿/臀部体积可能造成重叠 |
| 紧身裤/修身衣 | 否 | 紧身剪裁不易重叠 |

---

## 制作流程概要
1. **复制基础网格**  
   - 基于原FBX文件创建独立变形版本

2. **缩减体积**  
   - 在易重叠区域（胸部/手臂/腹部/臀部）微缩减体积  
   - 保持骨骼绑定不变  
   - 避免过度压缩 → 追求自然微调效果

3. **保持UV一致**  
   - UV1：贴图映射  
   - UV2：遮罩区域  
   - 必须与基础网格完全匹配

---

## 文件命名规范
推荐格式：**基础网格名称 + `_Jacket`**
| 基础网格名称 | 变形版本名称 |
|--------------|--------------|
| F_Costume_Top001 | F_Costume_Top001_Jacket |
| M_Costume_Pants001 | M_Costume_Pants001_Jacket |

> 提示：当导入`_Jacket`后缀的网格时，系统会在搭配外套时自动调用该版本

---

## Modkit导入步骤
1. 启动Modkit
2. 点击`导入变形网格`
3. 选择带`_Jacket`后缀的FBX文件
4. 选择与基础网格相同的骨架
5. 点击导入

---

## 穿着时的表现逻辑
| 穿着情况 | 使用的网格 |
|----------|------------|
| 单独穿着 | 基础网格 |
| 搭配外套 | `_Jacket`变形网格（自动应用） |

---

## 错误预防清单
| 检查项 | 状态 |
|--------|------|
| 骨骼结构是否完全相同？ | ✅ |
| 是否包含UV1和UV2？ | ✅ |

---

## 核心要点
- 仅当可能发生重叠时才需准备变形网格
- 必须保持UV通道和骨骼结构与基础网格一致
- 体积缩减建议控制在5-15%范围内
- 完成导入后建议实际测试多层穿搭效果

> 💡 专业建议：可在Blender中使用Shrinkwrap修改器辅助制作变形网格，保持表面拓扑一致